<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Launch My APP</title>
        <!-- <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script> -->
        
        <!--Adding local copy of fhir-client.js-->
        <script src="./assets/js/fhir-client.js"></script>
    </head>
    <body>
        <script>

            FHIR.oauth2.authorize({
                
              // The client_id that you should have obtained after registering a client at
              // the EHR.
              clientId: "my_web_app",

              /* 
              The scopes that you request from the EHR. In this case we want to:
               launch                           - Get the launch context
               openid & fhirUser                - Get the current user
               patient/Patient.read             - Read patient data
               patient/Observation.read         - Read patient observation data
               patient/MedicationRequest.read   - Read patient medication request data
               patient/Immunization.read        - Read patient immunization data
               patient/Condition.read           - Read patient conditions data
               patient/Procedure.read           - Read patient procedure data

              Starter Project: 
                - scope: "launch openid fhirUser patient/*.read",
              */
              //scope: "launch openid fhirUser patient/*.read",
              scope: "launch openid fhirUser patient/Patient.read patient/Observation.read patient/MedicationRequest.read patient/Immunization.read patient/Condition.read patient/Procedure.read",
              
              // Typically, if your redirectUri points to the root of the current directory
              // (where the launchUri is), you can omit this option because the default value is
              // ".". However, some servers do not support directory indexes so "." and "./"
              // will not automatically map to the "index.html" file in that directory.
              redirectUri: "index.html",
            
              //AJD: Added the missing parameter to the FHIR server used for this course work.
              //iss: "http://hl7-ips-server.org:8080/fhir",

            });
            debugger;
        </script>
    </body>
</html>